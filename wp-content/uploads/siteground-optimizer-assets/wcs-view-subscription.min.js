jQuery(function(b){var e=b('.wcs-auto-renew-toggle'),c=b('.subscription-auto-renew-toggle',e),a=c.find('i'),f=null,d=b('.subscription-payment-method'),j=b('#early_renewal_modal_submit'),i=b('.wcs-modal > .content-wrapper');function g(){return!f&&a&&a.length&&(f=getComputedStyle(a[0]).color),f}function h(){c.hasClass('subscription-auto-renew-toggle--on')&&a.length?(a[0].style.backgroundColor=g(),a[0].style.borderColor=g()):a.length&&(a[0].style.backgroundColor=null,a[0].style.borderColor=null)}function k(){c.removeClass('subscription-auto-renew-toggle--hidden')}function l(e){if(e.preventDefault(),c.trigger('blur'),c.hasClass('subscription-auto-renew-toggle--disabled'))return;var a=function(a){var c={subscription_id:WCSViewSubscription.subscription_id,action:a,security:WCSViewSubscription.auto_renew_nonce};o(),b.ajax({url:WCSViewSubscription.ajax_url,data:c,type:'POST',success:function(a){a.payment_method&&d.fadeOut(function(){d.html(a.payment_method).fadeIn()}),void 0!==a.is_manual&&d.data('is_manual',a.is_manual)},error:function(b,c,a){alert('Exception:',a)},complete:p})};c.hasClass('subscription-auto-renew-toggle--off')?WCSViewSubscription.has_payment_gateway?(a('wcs_enable_auto_renew'),m()):window.confirm(WCSViewSubscription.add_payment_method_msg)&&(window.location.href=WCSViewSubscription.add_payment_method_url):(a('wcs_disable_auto_renew'),n()),h()}function m(){a.removeClass('fa-toggle-off').addClass('fa-toggle-on'),c.removeClass('subscription-auto-renew-toggle--off').addClass('subscription-auto-renew-toggle--on')}function n(){a.removeClass('fa-toggle-on').addClass('fa-toggle-off'),c.removeClass('subscription-auto-renew-toggle--on').addClass('subscription-auto-renew-toggle--off')}function o(){e.block({message:null,overlayCSS:{opacity:0}})}function p(){e.unblock()}function q(){i.block({message:null,overlayCSS:{background:'#fff',opacity:.6}})}function r(a){if('.subscription_renewal_early'!==b(a.modal).data('modal-trigger'))return;return d.data('is_manual')==='no'}function s(){b('.subscription_details').block({message:null,overlayCSS:{background:'#fff',opacity:.6}})}c.on('click',l),h(),k(),j.on('click',q),b(document).on('wcs_show_modal',r),b(document).on('click','.wcs_block_ui_on_click',s)})