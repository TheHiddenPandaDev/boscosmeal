class Animal{constructor(a,b,c,d,e,f,g,h,i,j){this.name=a,this.type=b,this.race=c,this.ageInMonth=d,this.weightInGrams=e,this.gender=f,this.isNeutered=g,this.physicalState=h,this.physicalActivity=i,this.diseases=j}}class Calculadora{constructor(){this.minSteps=1,this.maxSteps=6,this.currentStep=1,this.animal=new Animal('','dog','',3,500,'male',!1,'normal','','Ninguna'),this.productsSelected=[],this.selectedDay='',this.selectedMonth='',this.selectedYear='',this.packageSelected=250,this.selectedPackage=!1}getDogPercentage(){if(this.animal.ageInMonth<=84&&this.animal.ageInMonth>12){if(this.animal.physicalActivity==='baja')return 2;if(this.animal.physicalActivity==='media')return 2.5;if(this.animal.physicalActivity==='alta')return 3;if(this.animal.physicalActivity==='deportista')return 3.5}if(this.animal.ageInMonth===3||this.animal.ageInMonth===4)return 8;if(this.animal.ageInMonth===5||this.animal.ageInMonth===6)return 6;if(this.animal.ageInMonth===7||this.animal.ageInMonth===8)return 4;if(this.animal.ageInMonth===9||this.animal.ageInMonth===10)return 3;if(this.animal.ageInMonth===11||this.animal.ageInMonth===12)return 2;if(this.animal.ageInMonth>84)return 2}getCatPercentage(){if(this.animal.ageInMonth<=84&&this.animal.ageInMonth>=12){if(this.animal.physicalActivity==='baja')return 3;if(this.animal.physicalActivity==='media')return 4;if(this.animal.physicalActivity==='alta')return 5}if(this.animal.ageInMonth===3||this.animal.ageInMonth===4)return 8;if(this.animal.ageInMonth===5||this.animal.ageInMonth===6)return 6;if(this.animal.ageInMonth>=7||this.animal.ageInMonth<=11)return 4;if(this.animal.ageInMonth>84)return 2}getMonthlyQuantity(){let a;return calculadora.animal.type==='dog'?a=this.getDogPercentage():a=this.getCatPercentage(),this.animal.weightInGrams*(a/100)*30}getDailyQuantity(){return this.roundToTwo(this.getMonthlyQuantity()/30)}roundToTwo(a){return+(Math.round(a+"e+2")+"e-2")}getCurrentWeightInGrams(){let a=0;for(let b=0;b<this.productsSelected.length;b++)a=parseInt(this.productsSelected[b].weight)+a;return a}getRecommendedPackageSize(){return this.getCurrentWeightInGrams()<=5e3?250:this.getCurrentWeightInGrams()>5e3&&this.getCurrentWeightInGrams()<=18e3?500:1e3}}let calculadora=new Calculadora;jQuery(document).ready(function(b){jQuery('#test').select2();let a=new Date;a.setDate(a.getDate()+2),calculadora.selectedDay=a.getDate(),calculadora.selectedMonth=a.getMonth()+1,calculadora.selectedYear=a.getFullYear(),b.datepicker.regional.es={closeText:'Cerrar',prevText:'< Ant',nextText:'Sig >',currentText:'Hoy',monthNames:['Enero','Febrero','Marzo','Abril','Mayo','Junio','Julio','Agosto','Septiembre','Octubre','Noviembre','Diciembre'],monthNamesShort:['Ene','Feb','Mar','Abr','May','Jun','Jul','Ago','Sep','Oct','Nov','Dic'],dayNames:['Domingo','Lunes','Martes','Miércoles','Jueves','Viernes','Sábado'],dayNamesShort:['Dom','Lun','Mar','Mié','Juv','Vie','Sáb'],dayNamesMin:['Do','Lu','Ma','Mi','Ju','Vi','Sá'],weekHeader:'Sm',dateFormat:'dd/mm/yy',firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:''},b.datepicker.setDefaults(b.datepicker.regional.es),b('#datepicker').datepicker({minDate:a,defaultDate:a,language:'es',beforeShowDay:function(a){let b=a.getDay();return[b!==1]},onSelect:function(c,a){console.log('dateText: '+c),console.log('inst: '),console.log(a),console.log('Date Selected: '+b(this).val()),calculadora.selectedDay=a.selectedDay,calculadora.selectedMonth=a.selectedMonth+1,calculadora.selectedYear=a.selectedYear,canGoToStep6()}}),b('#datepicker').val(b.datepicker.formatDate('dd/mm/yy',a))}),jQuery(function(){jQuery(".taiowcp-cart-close").on("click",function(){jQuery('#summary-calculator-sidebar').removeClass('model-summary-active')}),jQuery(".backBtn").on("click",function(){backStep()}),jQuery(".continueBtn").on("click",function(){goToNextStep()}),jQuery(".step").on("click",function(){}),jQuery("input[name='name']").on("keyup",function(){calculadora.animal.name=jQuery(this).val(),canGoToStep2()}),jQuery("input[list='race_dog']").on("change",function(){calculadora.animal.type==='dog'&&(calculadora.animal.race=jQuery(this).val(),jQuery("select[name='race_cat'] option:first").prop('selected',!0).trigger("change"),canGoToStep2())}),jQuery("input[list='race_cat']").on("change",function(){calculadora.animal.type==='cat'&&(calculadora.animal.race=jQuery(this).val(),jQuery("select[name='race_dog'] option:first").prop('selected',!0).trigger("change"),canGoToStep2())}),jQuery(".step1 .animal").on("click",function(){jQuery(".step1 .animal").removeClass('selected'),jQuery(this).addClass('selected'),calculadora.animal.type=jQuery(this).attr('data-animal');let a=jQuery(".step3 .animal img");if(calculadora.animal.type==='cat'){jQuery('#race_cat_animal_list').show(),jQuery('#race_dog_animal_list').hide();for(let b=0;b<a.length;b++)a[b].src=a[b].src.replace('gato','gato'),a[b].src=a[b].src.replace('perro','gato');jQuery('#activity_dog_animal_list').hide(),jQuery('#activity_cat_animal_list').show(),jQuery('#cat-products').show(),jQuery('#dog-products').hide()}else{jQuery('#race_dog_animal_list').show(),jQuery('#race_cat_animal_list').hide();for(let b=0;b<a.length;b++)a[b].src=a[b].src.replace('gato','perro'),a[b].src=a[b].src.replace('perro','perro');jQuery('#activity_cat_animal_list').hide(),jQuery('#activity_dog_animal_list').show(),jQuery('#dog-products').show(),jQuery('#cat-products').hide()}calculadora.animal.race='',canGoToStep2()}),jQuery("select[name='age']").on("change",function(){calculadora.animal.ageInMonth=parseInt(jQuery("select[name='age'] option:selected").val()),canGoToStep3()}),jQuery("select[name='weight']").on("change",function(){calculadora.animal.weightInGrams=parseInt(jQuery("select[name='weight'] option:selected").val()),canGoToStep3()}),jQuery("input[name='neutered']").on("click",function(){calculadora.animal.isNeutered=jQuery("input[name='neutered']").is(":checked"),canGoToStep3()}),jQuery(".step2 .animal").on("click",function(){if(jQuery(".step2 .animal").removeClass('selected'),jQuery(this).addClass('selected'),calculadora.animal.gender=jQuery(this).attr('data-animal-gender'),calculadora.animal.gender==='macho'){let a=jQuery('#macho-icon').attr("src"),b=jQuery('#hembra-icon').attr("src");a=a.replace('black','white'),a=a.replace('white','white'),b=b.replace('black','black'),b=b.replace('white','black'),jQuery('#macho-icon').attr("src",a),jQuery('#hembra-icon').attr("src",b)}else if(calculadora.animal.gender==='hembra'){let a=jQuery('#macho-icon').attr("src"),b=jQuery('#hembra-icon').attr("src");a=a.replace('black','black'),a=a.replace('white','black'),b=b.replace('black','white'),b=b.replace('white','white'),jQuery('#macho-icon').attr("src",a),jQuery('#hembra-icon').attr("src",b)}jQuery(this).addClass('selected'),canGoToStep4()}),jQuery("input[name='castrado']").on("click",function(){calculadora.animal.isNeutered=jQuery(this).is(":checked"),canGoToStep3()}),jQuery(".step3 .animal").on("click",function(){jQuery(".step3 .animal").removeClass('selected'),jQuery(this).addClass('selected'),calculadora.animal.physicalState=jQuery(this).attr('data-physical-state'),canGoToStep4()}),jQuery("select[name='activity_dog']").on("change",function(){calculadora.animal.physicalActivity=jQuery("select[name='activity_dog'] option:selected").val(),canGoToStep4()}),jQuery("select[name='activity_cat']").on("change",function(){calculadora.animal.physicalActivity=jQuery("select[name='activity_cat'] option:selected").val(),canGoToStep4()}),jQuery("select[name='activity_cat']").on("change",function(){calculadora.animal.physicalActivity=jQuery("select[name='activity_cat'] option:selected").val(),canGoToStep4()}),jQuery("select[name='animal_diseases']").on("change",function(){calculadora.animal.diseases=jQuery("select[name='animal_diseases'] option:selected").val(),canGoToStep4()}),jQuery(".single-product").on("click",function(){calculadora.packageSelected=parseInt(jQuery(this).attr('data-package-size')),calculadora.selectedPackage=!0,jQuery('.single-product').removeClass('selected'),jQuery(this).addClass('selected'),canGoToStep5()})});function goToNextStep(){(calculadora.currentStep===1&&canGoToStep2()||calculadora.currentStep===2&&canGoToStep3()||calculadora.currentStep===3&&canGoToStep4()||calculadora.currentStep===4&&canGoToStep5()||calculadora.currentStep===5&&canGoToStep6())&&calculadora.currentStep<=calculadora.maxSteps&&(calculadora.currentStep++,jQuery('.steps').hide(),jQuery('.step'+calculadora.currentStep).show(),jQuery('.continueBtn').show(),calculadora.currentStep===calculadora.minSteps&&jQuery('.backBtn').hide(),calculadora.currentStep===calculadora.maxSteps&&jQuery('.continueBtn').hide(),jQuery('.continueBtn').addClass('disabled'),jQuery('#currentStep').text(calculadora.currentStep),goToStep(calculadora.currentStep.toString()),calculadora.currentStep>calculadora.minSteps&&jQuery('.backBtn').css('display','inline-flex'),calculateWeight())}function backStep(){calculadora.currentStep>calculadora.minSteps&&(calculadora.currentStep--,jQuery('.steps').hide(),jQuery('.step'+calculadora.currentStep).show(),jQuery('.continueBtn').show(),calculadora.currentStep===calculadora.minSteps&&jQuery('.backBtn').hide(),calculadora.currentStep===calculadora.maxSteps&&jQuery('.continueBtn').hide(),jQuery('.continueBtn').addClass('disabled'),console.log('calculadora.currentStep: '+calculadora.currentStep),calculadora.currentStep===1&&canGoToStep2(),calculadora.currentStep===2&&canGoToStep3(),calculadora.currentStep===3&&canGoToStep4(),calculadora.currentStep===4&&canGoToStep5(),calculadora.currentStep===5&&canGoToStep6(),calculadora.currentStep===calculadora.minSteps&&jQuery('.backBtn').css('display','none'))}function canGoToStep2(){return calculadora.animal.type!==''&&calculadora.animal.race!==''&&calculadora.animal.race!=='0'&&calculadora.animal.name!==''?(enableMoveForwardBtn(),calculadora.animal.type==='cat'?(jQuery('#age_dog_animal_list').hide(),jQuery('#age_cat_animal_list').show()):calculadora.animal.type==='dog'&&(jQuery('#age_dog_animal_list').show(),jQuery('#age_cat_animal_list').hide()),!0):(disableMoveFordwardBtn(),!1)}function canGoToStep3(){return calculadora.animal.ageInMonth!==''&&calculadora.animal.gender!==''?(enableMoveForwardBtn(),calculadora.animal.type==='cat'?(jQuery('#activity_dog_animal_list').hide(),jQuery('#activity_cat_animal_list').show()):calculadora.animal.type==='dog'&&(jQuery('#activity_dog_animal_list').show(),jQuery('#activity_cat_animal_list').hide()),!0):(disableMoveFordwardBtn(),!1)}function canGoToStep4(){return calculadora.animal.physicalState!=='0'&&calculadora.animal.physicalActivity!=='0'&&calculadora.animal.diseases!==''?(enableMoveForwardBtn(),!0):(disableMoveFordwardBtn(),!1)}function canGoToStep5(){return calculadora.packageSelected===250||calculadora.packageSelected===500||calculadora.packageSelected===1e3?(enableMoveForwardBtn(),!0):(disableMoveFordwardBtn(),!1)}function canGoToStep6(){return calculadora.selectedDay!==''&&calculadora.selectedMonth!==''&&calculadora.selectedYear!==''?(enableMoveForwardBtn(),!0):(disableMoveFordwardBtn(),!1)}function enableMoveForwardBtn(){jQuery('.continueBtn').removeClass('disabled')}function disableMoveFordwardBtn(){jQuery('.continueBtn').addClass('disabled')}function goToStep(b){clearCalculatorErrors();let a;switch(b){case'1':a=!0;break;case'2':a=canGoToStep2();break;case'3':a=canGoToStep2()&&canGoToStep3();break;case'4':a=canGoToStep2()&&canGoToStep3()&&canGoToStep4();break;case'5':a=canGoToStep2()&&canGoToStep3()&&canGoToStep4()&&canGoToStep5();break;case'6':a=canGoToStep2()&&canGoToStep3()&&canGoToStep4()&&canGoToStep5()&&canGoToStep6();break;default:a=!1;break}if(console.log('Can Navigate? '+a),!a)switch(calculadora.currentStep){case 1:showCalculatorErrorsStep1();break;case 2:showCalculatorErrorsStep2();break;case 3:showCalculatorErrorsStep3();break;case 4:showCalculatorErrorsStep4();break;case 5:showCalculatorErrorsStep5();break;default:a=!1;break}if(a){calculadora.currentStep=parseInt(b),calculadora.currentStep===1&&canGoToStep2(),calculadora.currentStep===2&&canGoToStep3(),calculadora.currentStep===3&&canGoToStep4(),calculadora.currentStep===4&&canGoToStep5(),calculadora.currentStep===5&&canGoToStep6(),jQuery('.steps').hide(),jQuery('.step').removeClass('active'),jQuery('.numStep'+b).addClass('active'),jQuery('.step'+b).fadeIn();let a=jQuery('#summary-calculator-btn');b==='4'?a.show():a.hide(),b==='1'&&jQuery('.backBtn').hide(),calculateWeight(),calculateRecommendedPackage(),b==='6'&&(console.log(calculadora),jQuery.ajax({url:ajax_object.ajax_url,type:'POST',data:{action:'process_subscription',calculadora},success:function(a){a.success&&(window.location.href=a.data.redirect_url)},error:function(a){console.log(a)}}))}}function clearCalculatorErrors(){jQuery('.input-text').removeClass('input-calculator-error-msg'),jQuery('.calculator-error-msg').hide()}function showCalculatorErrorsStep1(){(calculadora.animal.race===''||calculadora.animal.race==='0')&&(jQuery("input[list='race_"+calculadora.animal.type+"']").addClass('input-calculator-error-msg'),jQuery('#animal-race-'+calculadora.animal.type+'-error-msg').show()),calculadora.animal.name===''&&(jQuery('#animal-name').addClass('input-calculator-error-msg'),jQuery('#animal-name-error-msg').show())}function showCalculatorErrorsStep2(){calculadora.animal.ageInMonth===''&&(jQuery('#age_in_month').addClass('input-calculator-error-msg'),jQuery('#age-in-month-error-msg').show()),calculadora.animal.weightInGrams===''&&(jQuery('#weight').addClass('input-calculator-error-msg'),jQuery('#weight-error-msg').show())}function showCalculatorErrorsStep3(){(calculadora.animal.physicalActivity==='0'||calculadora.animal.physicalActivity==='')&&(jQuery('#activity_'+calculadora.animal.type).addClass('input-calculator-error-msg'),jQuery('#activity-'+calculadora.animal.type+'-error-msg').show()),calculadora.animal.diseases===''&&(jQuery('#animal_diseases').addClass('input-calculator-error-msg'),jQuery('#animal-diseases-error-msg').show())}function showCalculatorErrorsStep4(){}function showCalculatorErrorsStep5(){}function calculateWeight(){calculadora.currentStep===4&&(jQuery('#final-animal-name').text(calculadora.animal.name),jQuery('#weight-quantity').text(calculadora.getMonthlyQuantity()/1e3),jQuery('#diary-weight-quantity').text(calculadora.getDailyQuantity()))}function calculateRecommendedPackage(){if(calculadora.currentStep===4&&!calculadora.selectedPackage){let a=calculadora.getRecommendedPackageSize();calculadora.packageSelected=a,jQuery('.single-product').removeClass('selected'),jQuery('.single-product').each(function(){parseInt(jQuery(this).data('package-size'))===a&&jQuery(this).addClass('selected')})}}