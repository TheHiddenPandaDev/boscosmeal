(function(a){"use strict";var b={init:function(){this.bindEvents()},bindEvents:function(){var a=this;a.cartopen(),a.cartclose(),a.AddCartProduct(),a.ShippingCartProduct(),a.UpdateCart(),a.refreshMyFragments()},cartopen:function(){a(document).on('click','a.taiowcp-content',function(b){b.preventDefault(),a(this).closest("div").toggleClass('model-cart-active')})},cartclose:function(){a(document).on('click','a.taiowcp-cart-close',function(b){b.preventDefault(),a('.taiowcp-wrap').removeClass('model-cart-active')}),a(document).on('click','body',function(b){if(a(b.target).closest('a.taiowcp-content, .taiowcp-cart-model').length)return;a('.taiowcp-wrap').removeClass('model-cart-active')})},refreshMyFragments:function(){a.ajax({url:taiowcp_param.wc_ajax_url.toString().replace('%%endpoint%%','get_refreshed_fragments'),type:'POST',data:{},success:function(b){if(b.fragments){var c=b.fragments,d=b.cart_hash;a.each(b.fragments,function(b,c){a(b).replaceWith(c),a(b).stop(!0).css('opacity','1').unblock()}),typeof wc_cart_fragments_params!='undefined'&&'sessionStorage'in window&&window.sessionStorage!==null&&(sessionStorage.setItem(wc_cart_fragments_params.fragment_name,JSON.stringify(b.fragments)),localStorage.setItem(wc_cart_fragments_params.cart_hash_key,b.cart_hash),sessionStorage.setItem(wc_cart_fragments_params.cart_hash_key,b.cart_hash),b.cart_hash&&sessionStorage.setItem('wc_cart_created',(new Date).getTime())),a(document.body).trigger('wc_fragments_loaded')}}})},AddCartProduct:function(){a(document).on('click','a.taiowcp-remove-item',function(b){f(a(b.currentTarget).data('key'),0)}),a(document).on('change','input.taiowcp-quantity',function(b){var c=a(this).val();f(a(b.currentTarget).data('key'),c)}),a(document).on('click','.taiowcp-related-product-item .th-button',function(b){b.preventDefault();var c=a(this).val();g(a(b.currentTarget).data('product_id'),c)}),a(document).on('click','.taiowcp-undo-item',function(d){b();var f=a(d.currentTarget),g={cart_key:f.data('key')};a.ajax({url:taiowcp_param.wc_ajax_url.toString().replace('%%endpoint%%','taiowcp_undo_item'),type:'POST',data:g,success:function(b){c(),e(),b.fragments&&a(document.body).trigger('added_to_cart',[b.fragments,b.cart_hash])}})});function g(d,f){if(!d||f===void 0)return;b(),a.ajax({url:taiowcp_param.wc_ajax_url.toString().replace('%%endpoint%%','taiowcp_add_item_cart'),type:'POST',data:{product_id:d,new_qty:f},success:function(b){var g,d,f;if(c(),e(),b.fragments){if(g=b.fragments,d=b.cart_hash,a.each(b.fragments,function(b,c){a(b).replaceWith(c),a(b).stop(!0).css('opacity','1').unblock()}),wc_cart_fragments_params&&(f=wc_cart_fragments_params.ajax_url.toString()+'-wc_cart_hash',sessionStorage.setItem(wc_cart_fragments_params.fragment_name,JSON.stringify(g)),localStorage.setItem(f,d),sessionStorage.setItem(f,d)),a(document.body).trigger('wc_fragments_loaded'),window.wc_checkout_params&&wc_checkout_params.is_checkout==="1"){if(a('form.checkout').length===0){location.reload();return}a(document.body).trigger("update_checkout")}window.wc_add_to_cart_params&&window.wc_add_to_cart_params.is_cart&&wc_add_to_cart_params.is_cart==="1"&&a(document.body).trigger("wc_update_cart")}}})}function f(d,f){if(!d||f===void 0)return;b(),a.ajax({url:taiowcp_param.wc_ajax_url.toString().replace('%%endpoint%%','taiowcp_update_item_quantity'),type:'POST',data:{cart_key:d,new_qty:f},success:function(b){var g,d,f;if(c(),e(),b.fragments){if(g=b.fragments,d=b.cart_hash,a.each(b.fragments,function(b,c){a(b).replaceWith(c),a(b).stop(!0).css('opacity','1').unblock()}),wc_cart_fragments_params&&(f=wc_cart_fragments_params.ajax_url.toString()+'-wc_cart_hash',sessionStorage.setItem(wc_cart_fragments_params.fragment_name,JSON.stringify(g)),localStorage.setItem(f,d),sessionStorage.setItem(f,d)),a(document.body).trigger('wc_fragments_loaded'),window.wc_checkout_params&&wc_checkout_params.is_checkout==="1"){if(a('form.checkout').length===0){location.reload();return}a(document.body).trigger("update_checkout")}window.wc_add_to_cart_params&&window.wc_add_to_cart_params.is_cart&&wc_add_to_cart_params.is_cart==="1"&&a(document.body).trigger("wc_update_cart")}}})}a(document).on('click','.taiowcp-coupon-submit',function(g){var e=a('#taiowcp-coupon-code').val().trim(),f;if(!e.length)return;b(),a(this).addClass('active'),f={security:taiowcp_param.apply_coupon_nonce,coupon_code:e},a.ajax({url:taiowcp_param.wc_ajax_url.toString().replace('%%endpoint%%','apply_coupon'),type:'POST',data:f,success:function(b){c(),a(document.body).trigger('applied_coupon',[e]),a(document.body).trigger('wc_fragment_refresh'),d('error',b)},complete:function(){}})}),a(document).on('click','.taiowcp-coupon-apply-btn',function(g){var e=a(this).val().trim(),f;if(!e.length)return;b(),a(this).addClass('added'),f={security:taiowcp_param.apply_coupon_nonce,coupon_code:e},a.ajax({url:taiowcp_param.wc_ajax_url.toString().replace('%%endpoint%%','apply_coupon'),type:'POST',data:f,success:function(b){c(),a(document.body).trigger('applied_coupon',[e]),a(document.body).trigger('wc_fragment_refresh'),d('error',b)},complete:function(){}})}),a(document).ready(function(){a('body').on('click','.taiowcp-show-coupon',function(){a('.taiowcp-coupon-list-content').toggleClass('taiowcp-cpnactive').slideToggle('slow')})}),a(document).on('click','.taiowcp-coupon-remove-coupon',function(f){var e=a(this).attr('data-coupon'),g;e.length||f.preventDefault(),b(),a(this).css("pointer-events","none"),g={security:taiowcp_param.remove_coupon_nonce,coupon:e},a.ajax({url:taiowcp_param.wc_ajax_url.toString().replace('%%endpoint%%','remove_coupon'),type:'POST',data:g,success:function(b){c(),a(document.body).trigger('removed_coupon',[e]),a(document.body).trigger('wc_fragment_refresh'),d('error',b)},complete:function(){}})});function b(){a('.taiowcp-cart-model-body').addClass('loading')}function c(){a('.taiowcp-cart-model-body').removeClass('loading')}function d(b,c){a('.taiowcp-notice').html(c).attr('class','taiowcp-notice').addClass('taiowcp-nt-'+b),a('.taiowcp-notice-box').fadeIn('fast'),clearTimeout(d);var d=setTimeout(function(){a('.taiowcp-notice-box').fadeOut('slow')},3e3)}function e(){a(document).ready(function(){a('.taiowcp-notice-container').fadeIn('fast'),clearTimeout(b);var b=setTimeout(function(){a('.taiowcp-notice-container').fadeOut('slow')},3e3)})}},ShippingCartProduct:function(){a(document).ready(function(){var b={init:function(){this.toggle_shipping=this.toggle_shipping.bind(this),this.shipping_method_selected=this.shipping_method_selected.bind(this),this.shipping_calculator_submit=this.shipping_calculator_submit.bind(this),a(document).on('click','.shipping-calculator-button',this.toggle_shipping),a(document).on('change','select.shipping_method, :input[name^=shipping_method]',this.shipping_method_selected),a(document).on('submit','form.woocommerce-shipping-calculator',this.shipping_calculator_submit),a('.shipping-calculator-form').hide()},toggle_shipping:function(){return a('.shipping-calculator-form').slideToggle('slow'),a(document.body).trigger('country_to_state_changed'),!1},shipping_method_selected:function(){var b={},c;a('select.shipping_method, :input[name^=shipping_method][type=radio]:checked, :input[name^=shipping_method][type=hidden]').each(function(){b[a(this).data('index')]=a(this).val()}),a('.taiowcp-cart-model-body').addClass('loading'),c={security:taiowcp_param.update_shipping_method_nonce,shipping_method:b},a.ajax({type:'post',url:taiowcp_param.wc_ajax_url.toString().replace('%%endpoint%%','update_shipping_method'),data:c,dataType:'html',success:function(b){a(document.body).trigger('wc_fragment_refresh')},complete:function(){a(document.body).trigger('updated_shipping_method'),a('.taiowcp-cart-model-body').removeClass('loading')}})},shipping_calculator_submit:function(c){c.preventDefault();var b=a(c.currentTarget);a('.taiowcp-cart-model-body').addClass('loading'),a('<input />').attr('type','hidden').attr('name','calc_shipping').attr('value','x').appendTo(b),a.ajax({type:b.attr('method'),url:b.attr('action'),data:b.serialize(),dataType:'html',success:function(b){a(document.body).trigger('wc_fragment_refresh'),a('.taiowcp-cart-model-body').removeClass('loading')}})}};!(window.wc_checkout_params&&wc_checkout_params.is_checkout==="1")&&!window.wc_cart_params&&b.init(),a(document.body).on('updated_shipping_method',function(){a(document.body).trigger('wc_fragment_refresh')}),a('body').on('click','.taiowcp-shipping .pencil , .taiowcp-shp-tgle',function(){a('.taiowcp-shptgl-cont').toggleClass('taiowcp-shipactive').slideToggle('slow')})})},UpdateCart:function(){a(document).on('added_to_cart',function(f,g,h,d){var c=function(){a('a.taiowcp-content').closest("div.taiowcp-slide-right, div.taiowcp-slide-left").toggleClass('model-cart-active'),a('.cart_fixed_2 .taiowcp-content').css('padding-bottom','0.75rem'),a(document.body).trigger('wc_fragment_refresh')};if(taiowcp_param.taiowcp_cart_open=='simple-open'&&c(),taiowcp_param.taiowcp_cart_open=='fly-image-open'&&e(d,c),taiowcp_param.apply_coupon_nonce||b(),window.wc_checkout_params&&wc_checkout_params.is_checkout==="1"){if(a('form.checkout').length===0){location.reload();return}a(document.body).trigger("update_checkout")}window.wc_add_to_cart_params&&window.wc_add_to_cart_params.is_cart&&wc_add_to_cart_params.is_cart==="1"&&a(document.body).trigger("wc_update_cart");function e(e,f){var d=a('.cart_fixed_1 .taiowcp-cart-item, .cart_fixed_2 .taiowcp-cart-item'),b=!1,c,g;if(e.parents('.taiowcp-fly-cart').length&&(c=e.closest('.taiowcp-fly-cart'),c.find("img").length?(b=c.find("img")):c.find('.woocommerce-product-gallery').length?b=c.find('.woocommerce-product-gallery'):b=c),!b||b.length===0||d.length===0){f();return}g=b.clone().offset({top:b.offset().top,left:b.offset().left}).css({opacity:'0.8',position:'absolute',height:'150px',width:'150px','z-index':'1000'}).appendTo(a('body')).animate({top:d.offset().top-10,left:d.offset().left-10,width:75,height:75},1e3,'easeInOutExpo'),setTimeout(function(){d.effect("shake",{times:1},200,setTimeout(function(){f()},200))},1500),g.animate({width:0,height:0},function(){a(this).detach()})}});function b(){a.ajax({url:taiowcp_param.ajax_url,type:'POST',data:{action:'taiowcp_create_nonces'},success:function(a){a['apply-coupon']&&(taiowcp_param.apply_coupon_nonce=a['apply-coupon']),a['remove-coupon']&&(taiowcp_param.remove_coupon_nonce=a['remove-coupon']),a['update-shipping-method']&&(taiowcp_param.update_shipping_method_nonce=a['update-shipping-method'])}})}}};b.init()})(jQuery)