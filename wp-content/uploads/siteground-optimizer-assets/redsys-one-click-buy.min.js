jQuery(document).ready(function(a){a('#one-click-buy-button').on('click',function(){var b,e,c,d,i,g,h,p,j,k,l,m,n,o,f;if(console.log(redsys_pay_one),b=redsys_pay_one.product_id,e=a('input.qty').val()||1,console.log('productId: '+b),console.log('qty: '+e),c=a('input[name="variation_id"]').val(),c&&(console.log('variationId: '+c),b=c),d=a('#redsys_token_id').val(),i=a('#billing_agente_navegador').val(),g=a('#billing_idioma_navegador').val(),h=a('#billing_altura_pantalla').val(),p=a('#billing_anchura_pantalla').val(),j=a('#billing_profundidad_color').val(),k=a('#billing_diferencia_horaria').val(),l=a('#billing_http_accept_headers').val(),m=a('#billing_tz_horaria').val(),n=a('#billing_js_enabled_navegador').val(),o=a('#redsys_token_type').val(),f='',a('#one-click-shipping-method').length>0&&(f=a('#one-click-shipping-method').val()),console.log('tokenId: '+d),console.log("Método de envío seleccionado:",a('#one-click-shipping-method').val()),!b||!d){alert('No se pudo obtener la información necesaria del producto.');return}a.post(redsys_pay_one.ajax_url,{action:'redsys_one_click_buy',product_id:b,qty:e,token_id:d,billing_agente_navegador:i,billing_idioma_navegador:g,billing_altura_pantalla:h,billing_anchura_pantalla:p,billing_profundidad_color:j,billing_diferencia_horaria:k,billing_http_accept_headers:l,billing_tz_horaria:m,billing_js_enabled_navegador:n,shipping_method:f,redsys_token_type:o},function(a){a.success?window.location.href=a.data.redirect_url:alert('Hubo un problema al crear el pedido.')})})})