jQuery(function(a){if(typeof wcsatt_cart_params=='undefined')return!1;var b=a(document),c=a(document.body);b.on('change','.wcsatt-add-cart-to-subscription-action-input',function(){var g=a('div.cart_totals'),c=a(this),b=c.closest('.wcsatt-add-cart-to-subscription-wrapper'),d=b.find('.wcsatt-add-cart-to-subscription-options'),f=c.is(':checked'),e;f?(b.block({message:null,overlayCSS:{background:'#fff',opacity:.6}}),e={add_to_subscription_checked:c.is(':checked')?'yes':'no',action:'wcsatt_load_subscriptions_matching_cart'},a.post(wcsatt_cart_params.wc_ajax_url.toString().replace('%%endpoint%%',e.action),e,function(a){'success'===a.result?(d.html(a.html),b.removeClass('closed'),b.addClass('open'),d.slideDown(200)):window.alert(wcsatt_cart_params.i18n_subs_load_error),b.unblock()})):(b.removeClass('open'),b.addClass('closed'),d.slideUp(200))}),b.on('click','.woocommerce-checkout .wcsatt-add-to-subscription-button',function(h){var b,f,d,e,g;h.preventDefault(),b=a(this),f=b.closest('.wcsatt-add-cart-to-subscription-options'),d=a('.woocommerce-checkout form'),d.block({message:null,overlayCSS:{background:'#fff',opacity:.6}}),e={'add-cart-to-subscription':parseInt(b.val(),10),'add-to-subscription-checked':'yes',action:'wcsatt_add_cart_to_subscription_from_checkout',wcsatt_nonce:f.find('#wcsatt_nonce').val()},a.post(wcsatt_cart_params.wc_ajax_url.toString().replace('%%endpoint%%',e.action),e,function(a){'success'===a.result?g(a.url)&&(location.href=a.url):c.trigger("update_checkout"),d.unblock()}),g=function(a){try{return new URL(a),!0}catch(a){return!1}}})})