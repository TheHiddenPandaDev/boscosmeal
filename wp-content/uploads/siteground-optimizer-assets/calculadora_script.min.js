class Animal{constructor(a,b,c,d,e,f,g,h,i,j){this.name=a,this.type=b,this.race=c,this.ageInMonth=d,this.weightInGrams=e,this.gender=f,this.isNeutered=g,this.physicalState=h,this.physicalActivity=i,this.diseases=j}}class Calculadora{constructor(){this.minSteps=1,this.maxSteps=7,this.currentStep=1,this.animal=new Animal('','dog','',3,500,'male',!1,'normal','','Ninguna'),this.productsSelected=[],this.selectedDay='',this.selectedMonth='',this.selectedYear='',this.packageSelected=250,this.selectedPackage=!1,this.monthlyQuantity=0,this.dailyQuantity=0,this.foodType='Crudo'}getDogPercentage(){if(this.animal.ageInMonth<=84&&this.animal.ageInMonth>12){if(this.animal.physicalActivity==='baja')return 2;if(this.animal.physicalActivity==='media')return 2.5;if(this.animal.physicalActivity==='alta')return 3;if(this.animal.physicalActivity==='deportista')return 3.5}if(this.animal.ageInMonth===3||this.animal.ageInMonth===4)return 8;if(this.animal.ageInMonth===5||this.animal.ageInMonth===6)return 6;if(this.animal.ageInMonth===7||this.animal.ageInMonth===8)return 4;if(this.animal.ageInMonth===9||this.animal.ageInMonth===10)return 3;if(this.animal.ageInMonth===11||this.animal.ageInMonth===12)return 2;if(this.animal.ageInMonth>84)return 2}getCatPercentage(){if(this.animal.ageInMonth<=84&&this.animal.ageInMonth>=12){if(this.animal.physicalActivity==='baja')return 3;if(this.animal.physicalActivity==='media')return 4;if(this.animal.physicalActivity==='alta')return 5}if(this.animal.ageInMonth===3||this.animal.ageInMonth===4)return 8;if(this.animal.ageInMonth===5||this.animal.ageInMonth===6)return 6;if(this.animal.ageInMonth>=7||this.animal.ageInMonth<=11)return 4;if(this.animal.ageInMonth>84)return 2}getMonthlyQuantity(){let a;return calculadora.animal.type==='dog'?a=this.getDogPercentage():a=this.getCatPercentage(),this.dailyQuantity=this.roundToTwo(this.animal.weightInGrams*(a/100)),this.monthlyQuantity=this.dailyQuantity*30,parseInt(this.monthlyQuantity)}getDailyQuantity(){return parseInt(this.dailyQuantity)}roundToTwo(a){return+(Math.round(a+"e+2")+"e-2")}getRecommendedPackageSize(){return this.monthlyQuantity<=5e3?250:this.monthlyQuantity>5e3&&this.monthlyQuantity<=18e3?500:1e3}addProduct(b,d,e,a,f,g){if(a+this.getCurrentWeightInGrams()>this.getMonthlyQuantity()+a)return!1;let c=-1;for(let a=0;a<this.productsSelected.length;a++)this.productsSelected[a].product_id===b&&(c=a,this.productsSelected[a].quantity++);return c===-1&&this.productsSelected.push({product_id:b,variant_id:d,name:e,weight:a,price:f,image:g,quantity:1}),!0}decreaseQuantityProduct(b){console.log('decreasing product');let a=-1;for(let c=0;c<this.productsSelected.length;c++)console.log('Checking... Id array: '+this.productsSelected[c].product_id+" Id to add: "+b),parseInt(this.productsSelected[c].product_id)===parseInt(b)&&(console.log('Index assigned'),a=c);a>-1&&(console.log('Has found product, index: '+a),this.productsSelected[a].quantity>1?(console.log('Decreasing quantity...'),this.productsSelected[a].quantity--):(console.log('Deleting product...'),this.productsSelected.splice(a,1),jQuery(`.single-product[data-single-product-id="${b}"]`).removeClass("has-quantity")))}removeProduct(a){console.log('Remove product: '+a),console.log('Products: '),console.log(this.productsSelected);let b=-1;for(let c=0;c<this.productsSelected.length;c++)console.log('Checking... Id array: '+this.productsSelected[c].product_id+" Id to add: "+a),parseInt(this.productsSelected[c].product_id)===parseInt(a)&&(console.log('Index assigned'),b=c);b>-1&&(console.log('Has found product, index: '+b),this.productsSelected.splice(b,1),jQuery(`.single-product[data-single-product-id="${a}"]`).removeClass("has-quantity"))}getProductQuantity(a){for(let b=0;b<this.productsSelected.length;b++)if(this.productsSelected[b].product_id===a)return this.productsSelected[b].quantity;return 0}getCurrentWeightInGrams(){let a=0;for(let b=0;b<this.productsSelected.length;b++)a=parseInt(this.productsSelected[b].weight)*parseInt(this.productsSelected[b].quantity)+a;return a}getCurrentAmount(){let a=0;for(let b=0;b<this.productsSelected.length;b++)a=this.productsSelected[b].price*this.productsSelected[b].quantity+a;return a}}let calculadora=new Calculadora;jQuery(document).ready(function(a){let b=new Date,c=new Date;c.setDate(c.getDate()+2);let d=c.getDay();(d===0||d===1)&&b.setDate(c.getDate()+(2-d)),calculadora.selectedDay=b.getDate(),calculadora.selectedMonth=b.getMonth()+1,calculadora.selectedYear=b.getFullYear(),a.datepicker.regional.es={closeText:'Cerrar',prevText:'< Ant',nextText:'Sig >',currentText:'Hoy',monthNames:['Enero','Febrero','Marzo','Abril','Mayo','Junio','Julio','Agosto','Septiembre','Octubre','Noviembre','Diciembre'],monthNamesShort:['Ene','Feb','Mar','Abr','May','Jun','Jul','Ago','Sep','Oct','Nov','Dic'],dayNames:['Domingo','Lunes','Martes','Miércoles','Jueves','Viernes','Sábado'],dayNamesShort:['Dom','Lun','Mar','Mié','Juv','Vie','Sáb'],dayNamesMin:['Do','Lu','Ma','Mi','Ju','Vi','Sá'],weekHeader:'Sm',dateFormat:'dd/mm/yy',firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:''},a.datepicker.setDefaults(a.datepicker.regional.es);function g(c){let b=0,a=new Date(c);while(b<3){a.setDate(a.getDate()+1);let c=a.getDay();c!==0&&c!==1&&c!==6&&b++}return a}let e=new Date,f=new Date('2024-12-11'),h=g(e);a('#datepicker').datepicker({minDate:e<f?f:h,defaultDate:b,language:'es',beforeShowDay:function(b){let a=b.getDay();return[a!==0&&a!==1&&a!==6]},onSelect:function(c,b){console.log('dateText: '+c),console.log('inst: ',b),console.log('Date Selected: '+a(this).val()),calculadora.selectedDay=b.selectedDay,calculadora.selectedMonth=b.selectedMonth+1,calculadora.selectedYear=b.selectedYear,canGoToStep7()}}),a('#datepicker').val(a.datepicker.formatDate('dd/mm/yy',e))}),jQuery(function(){jQuery(".page-template-calculator .taiowcp-cart-close").on("click",function(){const a=jQuery(".add-quantity-btn");a.removeClass("loading"),a.find(".loader").hide(),jQuery('#summary-calculator-sidebar').removeClass('model-summary-active')}),jQuery(".page-template-calculator .backBtn").on("click",function(){backStep()}),jQuery(".page-template-calculator .continueBtn").on("click",function(){goToNextStep()}),jQuery(".page-template-calculator .step").on("click",function(){}),jQuery(".page-template-calculator input[name='name']").on("keyup",function(){calculadora.animal.name=jQuery(this).val(),canGoToStep2()}),jQuery(".page-template-calculator input[list='race_dog']").on("change",function(){calculadora.animal.type==='dog'&&(calculadora.animal.race=jQuery(this).val(),jQuery("select[name='race_cat'] option:first").prop('selected',!0).trigger("change"),canGoToStep2())}),jQuery(".page-template-calculator input[list='race_cat']").on("change",function(){calculadora.animal.type==='cat'&&(calculadora.animal.race=jQuery(this).val(),jQuery("select[name='race_dog'] option:first").prop('selected',!0).trigger("change"),canGoToStep2())}),jQuery(".page-template-calculator .step1 .animal").on("click",function(){jQuery(".step1 .animal").removeClass('selected'),jQuery(this).addClass('selected'),calculadora.animal.type=jQuery(this).attr('data-animal');let a=jQuery(".step3 .animal img");if(jQuery("#dog-products-crudo").addClass('hidden'),jQuery("#dog-products-cocinado").addClass('hidden'),jQuery("#cat-products-crudo").addClass('hidden'),jQuery("#cat-products-cocinado").addClass('hidden'),jQuery("#"+calculadora.animal.type+"-products-"+calculadora.foodType.toLowerCase()).removeClass('hidden'),calculadora.productsSelected=[],recalculateCalculatorSummary(),calculadora.animal.type==='cat'){jQuery('.single-package[data-package-size="1000"]').hide(),jQuery('#race_cat_animal_list').show(),jQuery('#race_dog_animal_list').hide(),jQuery('.grid-packages').addClass('cat');for(let b=0;b<a.length;b++)a[b].src=a[b].src.replace('gato','gato'),a[b].src=a[b].src.replace('perro','gato');jQuery('#activity_dog_animal_list').hide(),jQuery('#activity_cat_animal_list').show(),jQuery('#cat-products').show(),jQuery('#dog-products').hide()}else{jQuery('.single-package[data-package-size="1000"]').show(),jQuery('#race_dog_animal_list').show(),jQuery('#race_cat_animal_list').hide(),jQuery('.grid-packages').removeClass('cat');for(let b=0;b<a.length;b++)a[b].src=a[b].src.replace('gato','perro'),a[b].src=a[b].src.replace('perro','perro');jQuery('#activity_cat_animal_list').hide(),jQuery('#activity_dog_animal_list').show(),jQuery('#dog-products').show(),jQuery('#cat-products').hide()}calculadora.animal.race='',canGoToStep2()}),jQuery(".page-template-calculator select[name='age']").on("change",function(){calculadora.animal.ageInMonth=parseInt(jQuery("select[name='age'] option:selected").val()),canGoToStep3()}),jQuery(".page-template-calculator select[name='weight']").on("change",function(){calculadora.animal.weightInGrams=parseInt(jQuery("select[name='weight'] option:selected").val()),canGoToStep3()}),jQuery(".page-template-calculator input[name='neutered']").on("click",function(){calculadora.animal.isNeutered=jQuery("input[name='neutered']").is(":checked"),canGoToStep3()}),jQuery(".page-template-calculator .step2 .animal").on("click",function(){if(jQuery(".step2 .animal").removeClass('selected'),jQuery(this).addClass('selected'),calculadora.animal.gender=jQuery(this).attr('data-animal-gender'),calculadora.animal.gender==='macho'){let a=jQuery('#macho-icon').attr("src"),b=jQuery('#hembra-icon').attr("src");a=a.replace('black','white'),a=a.replace('white','white'),b=b.replace('black','black'),b=b.replace('white','black'),jQuery('#macho-icon').attr("src",a),jQuery('#hembra-icon').attr("src",b)}else if(calculadora.animal.gender==='hembra'){let a=jQuery('#macho-icon').attr("src"),b=jQuery('#hembra-icon').attr("src");a=a.replace('black','black'),a=a.replace('white','black'),b=b.replace('black','white'),b=b.replace('white','white'),jQuery('#macho-icon').attr("src",a),jQuery('#hembra-icon').attr("src",b)}jQuery(this).addClass('selected'),canGoToStep4()}),jQuery(".page-template-calculator input[name='castrado']").on("click",function(){calculadora.animal.isNeutered=jQuery(this).is(":checked"),canGoToStep3()}),jQuery(".page-template-calculator .step3 .animal").on("click",function(){jQuery(".step3 .animal").removeClass('selected'),jQuery(this).addClass('selected'),calculadora.animal.physicalState=jQuery(this).attr('data-physical-state'),canGoToStep4()}),jQuery(".page-template-calculator select[name='activity_dog']").on("change",function(){calculadora.animal.physicalActivity=jQuery("select[name='activity_dog'] option:selected").val(),canGoToStep4()}),jQuery(".page-template-calculator select[name='activity_cat']").on("change",function(){calculadora.animal.physicalActivity=jQuery("select[name='activity_cat'] option:selected").val(),canGoToStep4()}),jQuery(".page-template-calculator select[name='activity_cat']").on("change",function(){calculadora.animal.physicalActivity=jQuery("select[name='activity_cat'] option:selected").val(),canGoToStep4()}),jQuery(".page-template-calculator select[name='animal_diseases']").on("change",function(){calculadora.animal.diseases=jQuery("select[name='animal_diseases'] option:selected").val(),canGoToStep4()}),jQuery(".page-template-calculator .single-package").on("click",function(){calculadora.packageSelected=parseInt(jQuery(this).attr('data-package-size')),jQuery('.variation-pricing').hide(),jQuery('.variation-pricing').each(function(){let a=jQuery(this).data('product-variation-name');a==='250g'&&calculadora.packageSelected===250?jQuery(this).show():a==='500g'&&calculadora.packageSelected===500?jQuery(this).show():a==='1kg'&&calculadora.packageSelected===1e3&&jQuery(this).show()}),jQuery('.single-product').removeClass("has-quantity"),calculadora.productsSelected=[],calculadora.selectedPackage=!0,jQuery('.single-package').removeClass('selected'),jQuery(this).addClass('selected'),canGoToStep5()}),jQuery(".page-template-calculator .add-quantity-btn").on("click",function(c){const a=jQuery(this);a.addClass("loading");const b=a.data("product-id");a.find(".loader").show(),updateAddToCartButton(calculadora.packageSelected,b).then(()=>{a.removeClass("loading");const c=a.closest(".single-product");c.addClass("has-quantity"),c.find("span.current-quantity").text(calculadora.getProductQuantity(b)),canGoToStep6()}).catch(b=>{console.log('Reason: '),console.log(b),a.removeClass("loading"),b==='No se puede agregar producto, se alcanzó la cantidad a comer al mes'?showToast("No se puede agregar producto, ya se ha alcanzado la cantidad a comer al mes",5e3):showToast("Error al añadir el producto",5e3),canGoToStep6()})}),jQuery(".page-template-calculator .remove-quantity-btn").on("click",function(d){console.log('decreasing product....'),calculadora.decreaseQuantityProduct(jQuery(this).attr('data-product-id'));const a=jQuery(this),b=a.data("product-id"),c=a.closest(".single-product");c.find("span.current-quantity").text(calculadora.getProductQuantity(b)),recalculateCalculatorSummary()}),jQuery("#summary-calculator-btn").on("click",function(){jQuery('#summary-calculator-sidebar').toggleClass('model-summary-active')}),jQuery("body").on("click",function(a){if(jQuery(a.target).closest('#summary-calculator-btn, #summary-calculator-sidebar, .add-quantity-btn, .remove-icon').length)return;if(jQuery('#summary-calculator-sidebar').hasClass('model-summary-active')){jQuery('#summary-calculator-sidebar').removeClass('model-summary-active');const a=jQuery(".add-quantity-btn");a.removeClass("loading"),a.find(".loader").hide()}}),jQuery("body").on("click",'span.remove-icon',function(){calculadora.removeProduct(jQuery(this).attr('data-product-id')),recalculateCalculatorSummary()}),jQuery(".step5 .food").on("click",function(){jQuery(".step5 .food").removeClass('selected'),jQuery(this).addClass('selected'),calculadora.foodType=jQuery(this).attr('data-food'),jQuery("#dog-products-crudo").addClass('hidden'),jQuery("#dog-products-cocinado").addClass('hidden'),jQuery("#cat-products-crudo").addClass('hidden'),jQuery("#cat-products-cocinado").addClass('hidden'),jQuery("#"+calculadora.animal.type+"-products-"+calculadora.foodType.toLowerCase()).removeClass('hidden'),canGoToStep6()})});function updateAddToCartButton(b,a){return console.log({action:"get_variation_by_package_size",package_size:b,product_id:a}),new Promise((d,c)=>{jQuery.ajax({url:ajax_object.ajax_url,type:"POST",data:{action:"get_variation_by_package_size",package_size:b,product_id:a},success:function(b){if(b.success){const e=b.data;console.log('API RESPONSE'),console.log(b.data);let f=calculadora.addProduct(a,e.variation_id,e.name,calculadora.packageSelected,parseFloat(e.price.toString().replace(',','.')),e.image);if(!f){c('No se puede agregar producto, se alcanzó la cantidad a comer al mes');return}recalculateCalculatorSummary(),d()}else console.log(b),console.log("No se encontró la variación."),c('No se encontró la variación')},error:function(a){console.log("Error en la solicitud AJAX:",a),c('Error en la solicitud AJAX')}})})}function showToast(b,c=3e3){const a=jQuery('<div class="toast"></div>').text(b);jQuery('body').append(a),setTimeout(()=>{a.addClass('show')},100),setTimeout(()=>{a.removeClass('show'),setTimeout(()=>{a.remove()},300)},c)}function recalculateCalculatorSummary(){jQuery('.summary_calculator_item').empty(),calculadora.productsSelected.length===0&&jQuery('.summary_calculator_item').append('<div class="no-items">Sin platos</div>');for(let a=0;a<calculadora.productsSelected.length;a++){let b=`
            <div class="item-product-wrap">
                <div class="product-details">
                    <div class="product-image"><img src="`+calculadora.productsSelected[a].image+`" alt="`+calculadora.productsSelected[a].name+`"/></div>
                    <div class="product-name">`+calculadora.productsSelected[a].name+`</div>
                    <span class="remove-icon" aria-label="Remove this item" data-product-id="`+calculadora.productsSelected[a].product_id+`">
                        <svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg" alt="" title=""
                             class="snipcart__icon">
                            <path fill-rule="evenodd" clip-rule="evenodd"
                                  d="M22 4v6.47H12v3.236h40V10.47H42V4H22zm3.333 6.47V7.235H38.67v3.235H25.333zm20.001 9.707h3.333V59H15.334V20.177h3.333v35.588h26.667V20.177zm-15 29.116V23.412h3.334v25.881h-3.334z"
                                  fill="currentColor"></path>
                        </svg>
                    </span>
                </div>
                <div class="item-product-quantity">
                    <span class="quantity">
                        <span class="quantity-text">Tamaño del paquete: 
                            <span class="product-quantity-weight">`+calculadora.productsSelected[a].weight+`g</span>
                        </span>
                    </span>
                </div>
                <div class="item-product-quantity">
                    <span class="quantity">
                        <span class="quantity-text">Cantidad: 
                            <span class="product-quantity-">`+calculadora.productsSelected[a].quantity+`</span>
                        </span>
                        <span class="product-amount">`+(calculadora.productsSelected[a].price*calculadora.productsSelected[a].quantity).toFixed(2).toString().replace('.',',')+`€</span>
                    </span>
                </div>
                
            </div>
            `;jQuery('.summary_calculator_item').append(b)}calculadora.getCurrentWeightInGrams(),calculadora.getCurrentAmount(),jQuery('div.summary-calculator-model-footer span.summary-calculator-value').text(calculadora.getCurrentWeightInGrams()+'gr'),jQuery('div.summary-calculator-model-footer span.woocommerce-Price-amount.amount').text(calculadora.getCurrentAmount().toFixed(2).toString().replace(',','.')+'€')}function goToNextStep(){(calculadora.currentStep===1&&canGoToStep2()||calculadora.currentStep===2&&canGoToStep3()||calculadora.currentStep===3&&canGoToStep4()||calculadora.currentStep===4&&canGoToStep5()||calculadora.currentStep===5&&canGoToStep6()||calculadora.currentStep===6&&canGoToStep7())&&calculadora.currentStep<=calculadora.maxSteps&&(calculadora.currentStep++,jQuery('.steps').hide(),jQuery('.step'+calculadora.currentStep).show(),jQuery('.continueBtn').show(),calculadora.currentStep===calculadora.minSteps&&jQuery('.backBtn').hide(),calculadora.currentStep===calculadora.maxSteps&&jQuery('.continueBtn').hide(),jQuery('.continueBtn').addClass('disabled'),jQuery('#currentStep').text(calculadora.currentStep),goToStep(calculadora.currentStep.toString()),calculadora.currentStep>calculadora.minSteps&&jQuery('.backBtn').css('display','inline-flex'),calculateWeight(),jQuery('.step').removeClass('active'),jQuery('.numStep'+calculadora.currentStep).addClass('active'))}function backStep(){calculadora.currentStep>calculadora.minSteps&&(calculadora.currentStep--,jQuery('.steps').hide(),jQuery('.step'+calculadora.currentStep).show(),jQuery('.continueBtn').show(),calculadora.currentStep===calculadora.minSteps&&jQuery('.backBtn').hide(),calculadora.currentStep===calculadora.maxSteps&&jQuery('.continueBtn').hide(),jQuery('.continueBtn').addClass('disabled'),console.log('calculadora.currentStep: '+calculadora.currentStep),calculadora.currentStep===1&&canGoToStep2(),calculadora.currentStep===2&&canGoToStep3(),calculadora.currentStep===3&&canGoToStep4(),calculadora.currentStep===4&&canGoToStep5(),calculadora.currentStep===5&&canGoToStep6(),calculadora.currentStep===6&&canGoToStep6(),calculadora.currentStep===5?jQuery('#summary-calculator-btn').show():jQuery('#summary-calculator-btn').hide(),calculadora.currentStep===calculadora.minSteps&&jQuery('.backBtn').css('display','none'),jQuery('.step').removeClass('active'),jQuery('.numStep'+calculadora.currentStep).addClass('active'))}function canGoToStep2(){return calculadora.animal.type!==''&&calculadora.animal.race!==''&&calculadora.animal.race!=='0'&&calculadora.animal.name!==''?(enableMoveForwardBtn(),calculadora.animal.type==='cat'?(jQuery('#age_dog_animal_list').hide(),jQuery('#age_cat_animal_list').show()):calculadora.animal.type==='dog'&&(jQuery('#age_dog_animal_list').show(),jQuery('#age_cat_animal_list').hide()),!0):(disableMoveFordwardBtn(),!1)}function canGoToStep3(){return calculadora.animal.ageInMonth!==''&&calculadora.animal.gender!==''?(enableMoveForwardBtn(),calculadora.animal.type==='cat'?(jQuery('#activity_dog_animal_list').hide(),jQuery('#activity_cat_animal_list').show()):calculadora.animal.type==='dog'&&(jQuery('#activity_dog_animal_list').show(),jQuery('#activity_cat_animal_list').hide()),!0):(disableMoveFordwardBtn(),!1)}function canGoToStep4(){return calculadora.animal.physicalState!=='0'&&calculadora.animal.physicalActivity!==''&&calculadora.animal.diseases!==''?(enableMoveForwardBtn(),!0):(disableMoveFordwardBtn(),!1)}function canGoToStep5(){return calculadora.packageSelected===250||calculadora.packageSelected===500||calculadora.packageSelected===1e3?(console.log('enabled btn from canGoToStep5'),jQuery('div.summary-calculator-model-footer span.summary-calculator-month-value').text(calculadora.getMonthlyQuantity()+'gr'),enableMoveForwardBtn(),!0):(console.log(calculadora.packageSelected),console.log('disabled btn from canGoToStep5'),disableMoveFordwardBtn(),!1)}function canGoToStep6(){const b=calculadora.getMonthlyQuantity()*.2,c=Number(calculadora.getMonthlyQuantity())+b,a=calculadora.getCurrentWeightInGrams();return calculadora.productsSelected.length>0&&a+b>=calculadora.getMonthlyQuantity()&&a<=c?(console.log('enabled btn from canGoToStep6'),enableMoveForwardBtn(),!0):(console.log('calculadora.productsSelected.length: '+calculadora.productsSelected.length),console.log('currentWeight: '+a),console.log('disabled btn from canGoToStep6'),disableMoveFordwardBtn(),!1)}function canGoToStep7(){return calculadora.selectedDay!==''&&calculadora.selectedMonth!==''&&calculadora.selectedYear!==''?(console.log('enabled btn from canGoToStep7'),enableMoveForwardBtn(),!0):(console.log('disabled btn from canGoToStep7'),disableMoveFordwardBtn(),!1)}function enableMoveForwardBtn(){jQuery('.continueBtn').removeClass('disabled')}function disableMoveFordwardBtn(){jQuery('.continueBtn').addClass('disabled')}function goToStep(b){clearCalculatorErrors();let a;switch(calculadora.currentStep===5?jQuery('#summary-calculator-btn').show():jQuery('#summary-calculator-btn').hide(),b){case'1':a=!0;break;case'2':a=canGoToStep2();break;case'3':a=canGoToStep2()&&canGoToStep3();break;case'4':a=canGoToStep2()&&canGoToStep3()&&canGoToStep4();break;case'5':a=canGoToStep2()&&canGoToStep3()&&canGoToStep4()&&canGoToStep5();break;case'6':a=canGoToStep2()&&canGoToStep3()&&canGoToStep4()&&canGoToStep5()&&canGoToStep6();break;case'7':a=canGoToStep2()&&canGoToStep3()&&canGoToStep4()&&canGoToStep5()&&canGoToStep6()&&canGoToStep7();break;default:a=!1;break}if(console.log('Can Navigate? '+a),!a)switch(calculadora.currentStep){case 1:showCalculatorErrorsStep1();break;case 2:showCalculatorErrorsStep2();break;case 3:showCalculatorErrorsStep3();break;case 4:showCalculatorErrorsStep4();break;case 5:showCalculatorErrorsStep5();break;default:a=!1;break}a&&(calculadora.currentStep=parseInt(b),calculadora.currentStep===1&&canGoToStep2(),calculadora.currentStep===2&&canGoToStep3(),calculadora.currentStep===3&&canGoToStep4(),calculadora.currentStep===4&&canGoToStep5(),calculadora.currentStep===5&&canGoToStep6(),calculadora.currentStep===6&&canGoToStep7(),jQuery('.steps').hide(),jQuery('.step'+b).fadeIn(),b==='1'&&jQuery('.backBtn').hide(),b==='4'&&(calculateWeight(),calculateRecommendedPackage()),b==='7'&&(console.log(calculadora),jQuery.ajax({url:ajax_object.ajax_url,type:'POST',data:{action:'process_subscription',calculadora},success:function(a){a.success?window.location.href=a.data.redirect_url:(console.log(a),console.log('Error al agregar la suscripción al carrito.'))},error:function(a){console.log(a)}})))}function clearCalculatorErrors(){jQuery('.input-text').removeClass('input-calculator-error-msg'),jQuery('.calculator-error-msg').hide()}function showCalculatorErrorsStep1(){(calculadora.animal.race===''||calculadora.animal.race==='0')&&(jQuery("input[list='race_"+calculadora.animal.type+"']").addClass('input-calculator-error-msg'),jQuery('#animal-race-'+calculadora.animal.type+'-error-msg').show()),calculadora.animal.name===''&&(jQuery('#animal-name').addClass('input-calculator-error-msg'),jQuery('#animal-name-error-msg').show())}function showCalculatorErrorsStep2(){calculadora.animal.ageInMonth===''&&(jQuery('#age_in_month').addClass('input-calculator-error-msg'),jQuery('#age-in-month-error-msg').show()),calculadora.animal.weightInGrams===''&&(jQuery('#weight').addClass('input-calculator-error-msg'),jQuery('#weight-error-msg').show())}function showCalculatorErrorsStep3(){(calculadora.animal.physicalActivity==='0'||calculadora.animal.physicalActivity==='')&&(jQuery('#activity_'+calculadora.animal.type).addClass('input-calculator-error-msg'),jQuery('#activity-'+calculadora.animal.type+'-error-msg').show()),calculadora.animal.diseases===''&&(jQuery('#animal_diseases').addClass('input-calculator-error-msg'),jQuery('#animal-diseases-error-msg').show())}function showCalculatorErrorsStep4(){}function showCalculatorErrorsStep5(){}function calculateWeight(){calculadora.currentStep===4&&(jQuery('#final-animal-name').text(calculadora.animal.name),jQuery('#weight-quantity').text(calculadora.getMonthlyQuantity()/1e3),jQuery('#diary-weight-quantity').text(calculadora.getDailyQuantity()))}function calculateRecommendedPackage(){if(calculadora.productsSelected=[],recalculateCalculatorSummary(),calculadora.currentStep===4&&!calculadora.selectedPackage){let a=calculadora.getRecommendedPackageSize();calculadora.packageSelected=a,jQuery('.variation-pricing').hide(),jQuery('.variation-pricing').each(function(){let a=jQuery(this).data('product-variation-name');a==='250g'&&calculadora.packageSelected===250?jQuery(this).show():a==='500g'&&calculadora.packageSelected===500?jQuery(this).show():a==='1kg'&&calculadora.packageSelected===1e3&&jQuery(this).show()}),jQuery('.single-package').removeClass('selected'),jQuery('.single-package').each(function(){parseInt(jQuery(this).data('package-size'))===a&&jQuery(this).addClass('selected')}),a===250?jQuery('.recommended-package').html('250gr'):a===500?jQuery('.recommended-package').html('500gr'):jQuery('.recommended-package').html('1kg')}}